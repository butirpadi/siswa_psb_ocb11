<odoo>
    <data>
        <record id="view_registrasi_filter" model="ir.ui.view">
            <field name="name">registrasi.list.select</field>
            <field name="model">siswa_psb_ocb11.calon_siswa</field>
            <field name="arch" type="xml">
                <search string="Search Siswa">
                    <field name="name" string="Nama" filter_domain="['|','|','|',
                                                                        ('name','ilike',self),
                                                                        ('panggilan','ilike',self),
                                                                        ('ayah','ilike',self),
                                                                        ('ibu','ilike',self),
                                                                        ]"/>
                    <group expand="0" string="Group By">
                        <filter name="group_tahunajaran_id" string="Tahun Ajaran" domain="[]" context="{'group_by':'tahunajaran_id'}"/>
                        <filter name="group_jenjang" string="Jenjang" domain="[]" context="{'group_by':'jenjang_id'}"/>
                        <filter name="group_jenis_kelamin" string="Jenis Kelamin" domain="[]" context="{'group_by':'jenis_kelamin'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_form_registrasi" model="ir.ui.view">
            <field name="name">calon.psb.ocb11.form</field>
            <field name="model">siswa_psb_ocb11.calon_siswa</field>
            <field name="arch" type="xml">
                <form string="Registrasi" class="o_sale_order">
                    <header>
                        <button name="action_confirm" type="object" string="Confirm" attrs="{'invisible':['|',('state', '=', 'reg'),('reg_number', '=', 'New')]}" class="btn btn-primary" />
                        <button name="action_print_kwitansi" type="object" string="Print" attrs="{'invisible':['|',('state', '=', 'draft'),('reg_number', '=', 'New')]}" class="btn" />
                        <button name="action_reset" type="object" string="Reset" attrs="{'invisible':[('state', '!=', 'reg')]}" class="btn btn-danger" confirm="Are you sure to do this action?" groups="siswa_psb_ocb11.siswa_psb_group_admin" />
                        <field name="state" widget="statusbar" statusbar_visible="draft,reg"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="reg_number" readonly="1"/>
                            </h1>
                        </div>
                        <notebook>
                            <page name="page_bioadata" string="Biodata" >
                                <group string="Biodata Siswa" >
                                    <group  >
                                        <field name="tahunajaran_id" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" context="{'active_test': False}" required="1" />
                                        <field name="tanggal_registrasi"  />
                                        <!-- <field name="formulir_id" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" /> -->
                                        <field name="is_siswa_lama"  />
                                        <field name="siswa_id" attrs="{'invisible':[('is_siswa_lama', '=', False)], 'required':[('is_siswa_lama','=',True)] }" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" />
                                        <field name="name" attrs="{'invisible':[('is_siswa_lama', '=', True)] }" />
                                        <!-- <field name="formulir_tahunajaran_id"/> -->
                                        <field name="jenjang_id" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" />
                                        <field name="panggilan" />
                                        <field name="jenis_kelamin" />
                                        <field name="tempat_lahir" />
                                        <field name="tanggal_lahir" />
                                        <field name="nis" />
                                        <field name="tahunajaran_id" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" context="{'active_test': False}" invisible="1" />
                                    </group>
                                    <group>
                                        <field name="anak_ke" />
                                        <field name="dari_bersaudara" />
                                        <label for="street" string="Alamat"/>
                                        <div class="o_address_format">
                                            <field name="street" placeholder="Street..." class="o_address_street" />
                                            <field name="street2" placeholder="Street 2..." class="o_address_street" />
                                            <field name="city" placeholder="City" class="o_address_city" />
                                            <field name="state_id" class="o_address_state" placeholder="State" options="{&quot;no_open&quot;: True}"  context="{'country_id': country_id, 'zip': zip}"/>
                                            <field name="zip" placeholder="ZIP" class="o_address_zip" />
                                            <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}" />
                                        </div>
                                        <field name="phone" />
                                        <field name="mobile" />
                                    </group>
                                </group>
                            </page>
                            <page name="page_orangtua" string="Orang Tua/Wali" >
                                <group string="Orang Tua/Wali" >
                                    <group  >
                                        <field name="ayah" />
                                        <field name="pekerjaan_ayah_id" string="Pekerjaan" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" />
                                        <field name="telp_ayah" string="Phone" />
                                    </group>
                                    <group>
                                        <field name="ibu" />
                                        <field name="pekerjaan_ibu_id" string="Pekerjaan" options="{'no_create':True,'no_edit':True,'no_create_edit': True,'no_open':True}" />
                                        <field name="telp_ibu" string="Phone" />
                                    </group>
                                </group>
                            </page>
                            <page name="page_pembayaran" string="Pembayaran" >
                                <!-- <group attrs="{'invisible':[('state', '=', 'reg')]}" >
                                    <group>
                                        <button name="generate_pembayaran" string="Generate Pembayaran" type="object" />
                                    </group>
                                    <group></group>
                                </group> -->
                                <field name="payment_lines" options='{"no_create": True}' >
                                    <tree editable="bottom" >
                                        <field name="calon_siswa_id" invisible="1" />
                                        <field name="biaya_id" readonly="1" />
                                        <field name="is_bulanan" invisible="1" />
                                        <field name="bulan" readonly="1" />
                                        <field name="harga" sum="Total Harga" />
                                        <field name="dibayar" sum="Total Bayar" />
                                    </tree>
                                </field>
                            </page>
                        </notebook>
                        

                        
                    </sheet>
                </form>
            </field>
        </record>

        <!-- explicit list view definition -->    
        <record model="ir.ui.view" id="registrasi_form_list">
            <field name="name">registrasi.form.list</field>
            <field name="model">siswa_psb_ocb11.calon_siswa</field>
            <field name="arch" type="xml">
                <tree  >
                    <field name="tahunajaran_id" string="Tahun Ajaran" />
                    <field name="reg_number" />
                    <field name="jenjang_id" />
                    <field name="tanggal_registrasi" />
                    <field name="name" />
                    <field name="jenis_kelamin" />
                    <field name="tanggal_lahir" />
                    <field name="state" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="siswa_psb_ocb11.registrasi_action_window">
            <field name="name">Registrasi</field>
            <field name="res_model">siswa_psb_ocb11.calon_siswa</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_group_tahunajaran_id':1,'search_default_group_jenjang':1}</field>
            <!-- <field name="search_view_id" ref="view_registrasi_filter"/> -->
            <!-- <field name="form_view_id" ref="siswa_psb_ocb11.view_form_registrasi"/> -->
            <!-- <field name="view_id" ref="siswa_psb_ocb11.registrasi_form_list"/> -->
            <!-- <field name="tree_view_id" ref="siswa_psb_ocb11.registrasi_form_list"/> -->
        </record>
    </data>
</odoo>